# 当我们输入网址之后发生了什么

## 流程

    1. 输入地址(URL 解析)
    2. 浏览器查找域名的 IP 地址(DNS 查询)
    3. 浏览器向 WEB 服务器发送一个 HTTP 请求(TCP 连接)
    4. 服务器处理请求
    5. 服务器返回一个 HTTP 响应
    6. 浏览器渲染页面(渲染)
    7. 浏览器发送请求获取页面中使用到的资源 (如 图片、视频、音频、css、js 等等资源)

## 1. 输入地址(URL 解析)- www.baidu.com

> 当开始在浏览器输入网站时，浏览器就已经开始匹配可能的 URL 。从历史记录、书签等等，找到已经输入的字符串可能对应的 URL,然后只能提示。

## 2. 浏览器查找域名的 IP 地址 (DNS-域名系统 查询)

> 1. 请求一旦发起，浏览器首先就是解析域名，浏览器会首先查看本地硬盘的 host 文件，查找是否存在和这个域名对应的规则。如果有,就直接使用 host 文件中的 IP 地址

> 2. 如果在本地 host 文件中没有对应的 IP 地址，浏览器会发出一个 DNS 请求到本地 DNS 服务器(一般都是你的网络接入服务器服务商提供)

> 3. DNS 请求到达本地 DNS 服务器后，本地 DNS 服务器会首先查询缓存，如果缓存中存在这条记录，直接返回结果(此过程是递归的方式进行查询)。如果没有，则本地 DNS 服务器继续向 DNS 根服务器进行查询

> 4. 本地 DNS 服务器获取根 DNS 服务器地址号，继续向根服务器请求，根服务器没有记录具体的域名和 IP 地址的对应关系，而是告诉本地 DNS 服务器，你可以到域服务器上进行查询，并返回域服务器的地址，(这种过程是迭代的过程)

> 5. 获取域服务器地址后，继续向域服务器请求。这个例子中，请求的是 .com 的域服务器。域服务器接收到请求后，也不会返回域名和 IP 地址的对应关系，而是返回当前域名的解析服务器地址

> 6. 最后，获取到域名解析服务器地址后，本地 DNS 服务器向域名的解析服务器请求，这时就能收到一个域名和 IP 地址的对应关系，本地 DNS 服务器将 IP 地址返回给用户电脑，同时将这个对应关系缓存起来，以便下一次用户访问时，可以直接返回结果，加快网络访问

![DNS解析流程](/images/DNS解析流程.jpeg)

## 3. 浏览器向 WEB 服务器发送一个 HTTP 请求

## 参考

- [从输入 URL 到页面展示到底发生了什么？看完吊打面试官！](https://zhuanlan.zhihu.com/p/133906695)
- [在浏览器输入 URL 回车之后发生了什么（超详细版）-前端角度](https://zhuanlan.zhihu.com/p/80551769)
