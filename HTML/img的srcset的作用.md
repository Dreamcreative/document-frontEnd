# img 的 srcset 的作用 - 响应式图片

> img 标签新增 `srcset`、`sizes`属性，主要作用

  1. 控制响应式图片，根据屏幕大小来选择显示不同图片
  2. 根据屏幕的不同（视网膜屏幕还是普通屏），展示不同质量的图片，合理控制下载资源，以及给用户高质量的享受

## srcset

> 格式一：图片源地址 空格 图片像素宽度[, 图片源地址 空格 图片像素宽度, ...]，如

```js
srcset="1.jpg 580w, 2.png 618w"
```

> 格式二：图片源地址 空格 屏幕像素密度[, 图片源地址 空格 屏幕像素密度, ...]，如

```js
srcset="1.jpg 1x, 2.png 2x"
```

> 表示图片 `1.jpg` 在 DPR 为1时显示，图片`2.png`在 DPR 为2时显示。如果没有更大的 DPR 设置的图片源，那么当大于当前设置的 DPR 最高值时，会采用当前设置的最大 DPR 的图片源。比如当 DPR 为3时，这里没有设置，会使用 DPR 为2时设置的图片

## sizes

> 只有当设置了 `srcset`，且单位为`w`时，`sizes`的设置才会生效。

> 浏览器到底是怎么选择图片了，是先根据 `sizes` 设定的条件下，找出此时图片显示的宽度，然后根据这个宽度去 `srcset`里找符合条件的图片

```js
<img src="4.jpg" srcset="3.jpg 229w,2.png 618w,1.jpg 1000w" sizes="300px">
```

![src-srcset兼容性](/images/HTML/src-srcset兼容性.png)

## 规范

  * 不同图片源，要都是同一个类型，如都是`x`的描述，或者都是`w`的描述
  * 不同图片源，不能是同一个值，如同`1x`或同`900w`
  * 同个图片源，不能既有`w`又有`x`
  * 用`w`描述时，一定要是图片真实的宽度。如果图片的宽度不真实，会影响浏览器对图片的选择，以及显示在浏览器上的图片也会进行一定比例的缩放

## 参考

* [响应式图片之srcset & sizes详讲](https://juejin.cn/post/6844903922109267976)
