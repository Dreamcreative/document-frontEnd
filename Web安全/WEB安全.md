# WEB安全

## xss (cross site scripting ) 跨站脚本攻击

### 非持久型xss(反射型xss)

#### 一次性攻击
打开一段带有恶意脚本代码的URL,当URL被打开时，恶意代码参数会被HTML解析、执行

#### 防范

##### 1前端渲染的时候对任何字段都进行转义编码

##### 2.不要使用eval、new Function()、 document.write()等可执行字符串的方法

##### 3.不要从URL上获取数据直接渲染

### 持久型xss （存储性xss）

#### 将恶意代码通过表单提交等交互功能提交到数据库存储。
当用户请求到这条数据后，恶意代码会在浏览器进行解
析和执行，从而拿到用户的隐私数据

#### 防范

##### CSP(建立白名单) 。

###### 设置HTTP header中的Content-Security-Policy

####### 只允许加载本站资源 Content-Security-Policy: default-src 'self'

####### 只允许加载 HTTPS 协议图片 Content-Security-Policy: img-src https://*

####### 允许加载任何来源框架 Content-Security-Policy: child-src 'none'

###### 设置meta标签的方式

##### 对用户输入的内容进行转义存储

##### 设置cookie的 httponly 属性，只允许cookie被服务器使用

## CSRF(cross site Request forgery) 跨站请求伪造

### 完成CSRF攻击的前提

#### 1，用户已经登陆了站点A，并在本地记录了cookie

#### 2.用户在没有登出站点A的情况下，访问了危险站点B

#### 3，站点A没有做任何CSRF防御

### 防御

#### 1，不允许get请求对数据做修改

#### 2，不让第三方网站访问到用户cookie

#### 3.请求时附带验证信息，比如验证码或者token

## 点击劫持

## SQL注入

### 后端在进行查询操作时，直接使用了用户的输入内容而没有做任何处理，使得sql直接执行了这段内容

### 防御

#### 1，严格设置web应用的数据库权限

#### 2，后端代码检查输入的数据是否符合预期

#### 3.对进入数据库的特殊字符进行转义处理

#### 4.所有查询语句建议使用数据库提供的参数化查询接口

## OS命令攻击

## DOS/DDOS半连接攻击

### 类型

#### 资源消耗型

#### 带宽占用型

### DOS拒绝服务攻击

#### 攻击服务器的客户端不多

### DDOS分布式拒绝服务攻击

#### 使用大量的肉鸡对服务器发送半连接请求

### 短时间内向服务器发送大量的半连接请求，占用服务器资源，使得服务器资源短时间内无法释放，使服务器宕机
