# 微信小程序为什么无法访问 DOM

- 为了安全

> 当用户进入微信小程序时，小程序代码包会被拉到本地，使得小程序可以离线浏览。

> 微信提供一种可以展示敏感数据的组件（只能展示，开发者无法拿到数据）。如果开发者能够通过 JavaScript 操作界面（`DOM 树`）,从而`直接获取这些敏感数据`，那么`小程序毫无安全可言`

> 为了解决管控和安全问题，微信必须阻止开发者使用浏览器提供的诸如页面跳转、操作 DOM、动态执行脚本等开放性接口。

> 如果只进行阻止开发者使用浏览器的某些开放性接口，成本会很高，而且当浏览器更新后，微信还需要同步更新。

> 为了一劳永逸，彻底解决这个问题，微信小程序使用了一个`沙箱环境`来运行开发者的 JavaScript 代码，这个沙箱环境只能执行 JavaScript 代码，不能有`任何浏览器接口`,类似于 H5 中的 `ServiceWorker`、`WebWorker`,这两者都是启用另一个线程来执行 JavaScript。但考虑到小程序是一个多 webview 的架构，我们不好去用某个 webview 中的 ServiceWorker 去管理所有的小程序页面
