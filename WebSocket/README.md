# WebSocket

> websocket 是 HTML5 的一种新协议，允许服务器向客户端传递信息，实现服务器与客户端的`全双工通信`

> 服务器主动向客户端推送信息，客户端也可以主动向服务器发送信息，是真正的双向平等对话，属于`服务器推送计数`的一种

## 全双工通讯协议的概念

  * 全双工：两个用户在同一时刻能够同时向对方发送数据
  * 半双工：两个用户同一时刻只能有一个用户发送数据，例如`对讲机`
  * 单工：两个用户，只能接收对方发送的数据，不能向对象发送数据，例如`电视`

## 特点

  * 建立在 TCP 协议之上，服务器端的实现比较容易
  * 与 HTTP 具有良好的兼容性。并且握手阶段采用 HTTP 协议
  * 数据格式比较轻量，性能开销小，通信高效
  * 可以发送文本，也可以发送二进制数据
  * 没有同源限制，客户端可以与任意服务器通信
  * 协议标识为 `ws:`对应 `http:`,`wss:`对应 `https:`

## http 与 websocket 的区别

  * http 协议是短连接，在请求之后，连接就会被关闭，下次请求需要重新建立一个新的连接
  * websocket 协议是一个长连接，只需要建立一次连接，之后所有的请求和响应都通过 TCP 连接进行通信

## 参考

* [持续输出面试题之WebSocket](https://segmentfault.com/a/1190000025153463)
